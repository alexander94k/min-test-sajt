---
import { getCollection } from 'astro:content';
import '../styles/global.css';
import Footer from '../components/Footer.astro';
import BaseHead from '../components/BaseHead.astro';

const artiklar = await getCollection('artiklar');
const sortedArtiklar = artiklar.sort((a, b) =>
    new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime()
);

---

<!DOCTYPE html>
<html lang="sv">
<head>
    <BaseHead />  <style is:global>
    /* ========================================
       BASE STYLES & CONTAINER STRUCTURE
       ======================================== */

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
    }

    /* Main container - max 1200px, centrerad */
    .page-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 100px;
    }

    /* Text content container - max 720px för läsbarhet */
    .text-container {
      max-width: 720px;
      margin: 0 auto;
    }

    /* ========================================
       TYPOGRAPHY - DESKTOP (>768px)
       ======================================== */

    h1 {
      font-size: 48px;
      font-weight: 700;
      color: #0c1935;
      line-height: 1.2;
      margin: 0 0 24px 0;
      text-align: center;
    }

    h2 {
      font-size: 32px;
      font-weight: 700;
      color: #1f3a5e;
      line-height: 1.3;
      margin: 0 0 24px 0;
      text-align: center;
    }

    h3 {
      font-size: 24px;
      font-weight: 600;
      color: #1f3a5e;
      line-height: 1.3;
      margin: 0 0 16px 0;
    }

    p {
      font-size: 16px;
      line-height: 1.5;
      color: #444;
      margin: 0 0 20px 0;
    }

    /* ========================================
       SECTIONS - DESKTOP
       ======================================== */

    section {
      padding: 80px 0;
    }

    /* Card/Box styling */
    .card {
      background: white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .info-box {
      background: #f0f5f7;
      border-left: 4px solid #1e3a5f;
      padding: 32px;
      border-radius: 8px;
    }

    /* Dark background boxes */
    .dark-box {
      background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
      border-radius: 20px;
      padding: 60px 40px;
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }

    .dark-box h2 {
      color: white;
      margin-bottom: 16px;
    }

    .dark-box p {
      color: rgba(255,255,255,0.9);
    }

    .dark-box .big-number {
      font-size: 64px;
      font-weight: 700;
      color: white;
      margin-bottom: 16px;
    }

    /* Features grid - 2 kolumner x 2 rader */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 40px;
      margin-top: 48px;
    }

    .feature-item {
      text-align: center;
    }

    .feature-icon {
      width: 56px;
      height: 56px;
      margin: 0 auto 20px;
      color: #1e3a5f;
    }

    .feature-icon svg {
      width: 100%;
      height: 100%;
    }

    /* CTA Section */
    .cta-section {
      background: linear-gradient(135deg, #1e3a5f 0%, #2d5a8f 100%);
      padding: 60px 40px;
      border-radius: 16px;
      text-align: center;
      color: white;
    }

    .cta-section h2 {
      color: white;
      margin-bottom: 20px;
    }

    .cta-section p {
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 32px;
    }

    .btn-cta {
      display: inline-block;
      background: white;
      color: #1e3a5f;
      padding: 16px 40px;
      min-height: 44px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 17px;
      text-decoration: none;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .btn-cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }

    /* ========================================
       MOBILE STYLES (<768px)
       ======================================== */

    @media (max-width: 768px) {
      /* Container padding */
      .page-container {
        padding: 0 16px;
      }

      /* Section padding */
      section {
        padding: 48px 0;
      }

      /* Typography - mobile */
      h1 {
        font-size: 32px;
        text-align: left;
      }

      h2 {
        font-size: 24px;
        text-align: left;
      }

      h3 {
        font-size: 20px;
        text-align: left;
      }

      p {
        font-size: 16px;
        text-align: left;
      }

      /* Cards and boxes - mobile */
      .card {
        padding: 20px;
      }

      .info-box {
        padding: 20px;
      }

      .dark-box {
        padding: 32px 20px;
        text-align: left;
      }

      .dark-box h2 {
        text-align: left;
      }

      .dark-box p {
        text-align: left;
      }

      .dark-box .big-number {
        font-size: 48px;
        text-align: left;
      }

      /* Features - mobile */
      .features-grid {
        grid-template-columns: 1fr;
        gap: 24px;
      }

      .feature-item {
        text-align: left;
      }

      .feature-icon {
        margin: 0 0 16px 0;
      }

      /* CTA - mobile */
      .cta-section {
        padding: 40px 20px;
      }

      .btn-cta {
        width: 100%;
        min-height: 44px;
        display: block;
        text-align: center;
      }
    }

    /* ========================================
       UTILITY CLASSES
       ======================================== */

    .text-center {
      text-align: center;
    }

    .mt-48 {
      margin-top: 48px;
    }

    .mb-48 {
      margin-bottom: 48px;
    }

    .gray-bg {
      background: #f8f9fa;
    }
  </style>
</head>
<body>
<header class="header">
    <div class="header-inner">
        <a href="/" class="logo">
            <div class="logo-icon">
                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                    <rect width="512" height="512" rx="110" fill="#1e3a5f"></rect>
                    <circle cx="200" cy="180" r="45" fill="#FFFFFF"></circle>
                    <circle cx="312" cy="332" r="45" fill="#FFFFFF"></circle>
                    <rect x="225" y="195" width="70" height="120" rx="8" transform="rotate(35 260 255)" fill="#FFFFFF"></rect>
                </svg>
            </div>
            <span class="logo-text">Ränta.nu</span>
        </a>

        <nav class="header-nav">
            <a href="/">Hem</a>
            <a href="/basta-rantan">Bästa räntan</a>
            <a href="/berakna">Beräkna ränta</a>
            <a href="/artiklar" class="active">Artiklar</a>
            <a href="/kontakt">Kontakt</a>
        </nav>

        <a href="/berakna" class="btn-login">Kalkylatorer</a>
    </div>
</header>

<!-- Hero Section -->
<section class="hero" style="padding: 80px 0 60px;">
    <div class="hero-inner" style="grid-template-columns: 1fr;">
        <div class="hero-content" style="text-align: center;">
            <h1 style="font-size: 52px; margin-bottom: 24px;">Insikter & guider om räntor och sparande</h1>
            <p style="font-size: 20px; color: #555; max-width: 800px; margin: 0 auto;">
                Utforska våra artiklar och lär dig allt om räntor, sparande och smart ekonomi. Vi hjälper dig fatta bättre finansiella beslut.
            </p>
        </div>
    </div>
</section>

<!-- Articles Grid -->
<section class="content-section">
    <div class="section-inner">
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 32px;">
            {sortedArtiklar.map((artikel) => (
                <article style="background: white; border-radius: 16px; overflow: hidden; border: 1px solid #e5e5e5; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05);"
                         onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 24px rgba(0,0,0,0.12)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.05)'">
                    <a href={`/${artikel.slug}/`} style="text-decoration: none; color: inherit; display: block;">
                        {artikel.data.featuredImage && (
                            <div style="position: relative; width: 100%; height: 220px; overflow: hidden; background: #f0f5f7;">
                                <img
                                    src={artikel.data.featuredImage}
                                    alt={artikel.data.title}
                                    style="width: 100%; height: 100%; object-fit: cover;"
                                />
                                <div style="position: absolute; top: 16px; left: 16px; background: #1e3a5f; color: white; padding: 6px 14px; border-radius: 6px; font-size: 13px; font-weight: 600;">
                                    Ekonomi
                                </div>
                            </div>
                        )}

                        <div style="padding: 24px;">
                            <h2 style="font-size: 22px; font-weight: 600; color: #0c1935; margin-bottom: 12px; line-height: 1.3;">
                                {artikel.data.title}
                            </h2>

                            {artikel.data.description && (
                                <p style="font-size: 15px; color: #555; line-height: 1.6; margin-bottom: 16px;">
                                    {artikel.data.description.substring(0, 120)}...
                                </p>
                            )}

                            <div style="display: flex; align-items: center; gap: 16px; font-size: 14px; color: #888;">
                                <span style="display: flex; align-items: center; gap: 6px;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                    {new Date(artikel.data.publishDate).toLocaleDateString('sv-SE', { year: 'numeric', month: 'short', day: 'numeric' })}
                                </span>
                                <span style="display: flex; align-items: center; gap: 6px;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="12 6 12 12 16 14"></polyline>
                                    </svg>
                                    5 min läsning
                                </span>
                            </div>
                        </div>
                    </a>
                </article>
            ))}
        </div>

        {sortedArtiklar.length === 0 && (
            <div style="text-align: center; padding: 60px 20px; color: #888;">
                <p style="font-size: 18px;">Inga artiklar hittades ännu.</p>
            </div>
        )}
    </div>
</section>

<!-- CTA Section -->
<section style="padding: 80px 0; background: #fff;">
    <div class="section-inner">
        <div style="max-width: 800px; margin: 0 auto; background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%); border-radius: 20px; padding: 60px 40px; box-shadow: 0 10px 40px rgba(30, 58, 95, 0.15);">
<div style="text-align: center; max-width: 700px; margin: 0 auto;">
            <h2 class="section-title-white" style="margin-bottom: 24px;">Vill du börja spara smartare?</h2>
            <p style="color: rgba(255,255,255,0.9); font-size: 18px; margin-bottom: 32px;">
                Använd våra kalkylatorer för att beräkna din framtida avkastning och jämför räntor från Sveriges alla banker.
            </p>
            <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                <a href="/berakna" class="btn-primary" style="background: white; color: #1e3a5f;">
                    Räkna ut ränta
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"></path></svg>
                </a>
                <a href="/basta-rantan" class="btn-secondary" style="border-color: white; color: white;">
                    Jämför banker
                </a>
            </div>
        </div>
        </div>
    </div>
</section>

<!-- Footer -->
<Footer />

</body>
</html>
